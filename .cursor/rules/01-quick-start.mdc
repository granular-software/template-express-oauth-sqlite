# Express + OAuth + SQLite Template

Production-ready MCP server with OAuth2.1 authentication and SQLite database.

## Quick Start

```bash
git clone <template-repo>
cd template-express-oauth-sqlite
cp env.example .env
# Edit .env with your values
npm install
npm run db:init
npm run dev
```

## Environment
```bash
JWT_SECRET=your-secure-secret-key
SERVER_URL=http://localhost:3000
PORT=3000
DB_PATH=data/app.db
```

## Resource Example
```typescript
const noteResource = createResource({
  name: "note",
  schema: NoteSchema,
  uri_template: "notes/{id}",
  methods: {
    create: { 
      handler: async (data, user) => {
        if (!user) throw new Error("Authentication required");
        return createNote({ ...data, authorId: user.id });
      }
    },
    list: { 
      handler: async (_, user) => {
        if (!user) return getPublicNotes();
        return getNotesForUser(user.id);
      }
    },
  },
});
```

## Handler Pattern
```typescript
// OAuth handlers receive full user context
handler: async (data, user) => {
  if (!user) throw new Error("Authentication required");
  
  // user.id, user.username, user.email, user.scopes available
  return await processDataForUser(data, user);
}
```

## Authentication
```bash
# Register
curl -X POST http://localhost:3000/auth/register \
  -d '{"username":"user","email":"user@example.com","password":"pass"}'

# Login
curl -X POST http://localhost:3000/auth/login \
  -d '{"username":"user","password":"pass"}'

# Use token
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:3000/api/notes
```
description: Quick start guide for Express + OAuth + SQLite template
globs: ["**/*.ts", "**/*.tsx"]
alwaysApply: false
---
